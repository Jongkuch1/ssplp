<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Courses - SSPLP</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="teacher-dashboard.html">
                    <img src="logo..png" alt="SSPLP Logo" class="logo">
                    <span>SSPLP</span>
                </a>
            </div>
            <div class="nav-menu">
                <a href="teacher-dashboard.html" class="nav-link" data-i18n="home">Home</a>
                <a href="teacher-courses.html" class="nav-link active" data-i18n="courses">Courses</a>
                <a href="teacher-assignments.html" class="nav-link" data-i18n="assignments">Assignments</a>
                <a href="teacher-students.html" class="nav-link" data-i18n="students">Students</a>
                <a href="messaging.html" class="nav-link" data-i18n="messages">Messages</a>
                <a href="teacher-analytics.html" class="nav-link" data-i18n="analytics">Analytics</a>
            </div>
            <div style="display: flex; gap: 10px; align-items: center;">
                <div class="language-switcher">
                    <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">EN</button>
                    <button class="lang-btn" data-lang="ar" onclick="setLanguage('ar')">AR</button>
                </div>
                <a href="profile.html" class="btn-secondary" style="padding: 8px 16px; display: flex; align-items: center; gap: 8px;">
                    <img id="navProfilePic" src="https://via.placeholder.com/32" style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 2px solid #6d28d9;">
                    <span data-i18n="profile">Profile</span>
                </a>
                <button id="logoutBtn" class="btn-signin" data-i18n="logout">Logout</button>
            </div>
        </div>
    </nav>

    <section class="dashboard">
        <div class="container">
            <h1><i class="fas fa-book"></i> <span data-i18n="myCourses">My Courses</span></h1>
            <p data-i18n="manageCoursesDesc">Manage your courses and learning materials</p>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 data-i18n="yourCourses">Your Courses</h2>
                    <a href="course-builder.html" class="btn btn-primary">
                        <i class="fas fa-plus"></i> <span data-i18n="createCourse">Create Course</span>
                    </a>
                </div>
                <div id="coursesList" class="subjects-grid"></div>
            </div>
        </div>
    </section>

    <script src="js/i18n.js"></script>
    <script src="js/seed-data.js"></script>
    <script src="js/app.js"></script>
    <script>
        const subjectIcons = {
            'Mathematics': 'fa-calculator',
            'English': 'fa-book',
            'Physics': 'fa-atom',
            'Chemistry': 'fa-flask',
            'Biology': 'fa-dna',
            'Agriculture': 'fa-seedling',
            'ICT': 'fa-laptop-code',
            'History': 'fa-landmark',
            'Geography': 'fa-globe',
            'Commerce': 'fa-briefcase',
            'Accounting': 'fa-calculator',
            'Literature': 'fa-book-open',
            'Religion': 'fa-pray',
            'Citizenship': 'fa-flag'
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
            
            if (user.profilePicture) {
                document.getElementById('navProfilePic').src = user.profilePicture;
            }
            
            const courses = JSON.parse(localStorage.getItem('courses') || '[]')
                .filter(c => c.teacherId === user.id);
            const assignments = JSON.parse(localStorage.getItem('assignments') || '[]');
            const resources = JSON.parse(localStorage.getItem('resources') || '[]');
            const students = JSON.parse(localStorage.getItem('users') || '[]').filter(u => u.role === 'student');
            
            const container = document.getElementById('coursesList');
            
            if (courses.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #6b7280;">
                        <i class="fas fa-book" style="font-size: 64px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <h3 data-i18n="noCoursesYet">No courses yet</h3>
                        <p data-i18n="createFirstCourse">Create your first course to get started</p>
                        <a href="course-builder.html" class="btn btn-primary" style="margin-top: 20px;">
                            <i class="fas fa-plus"></i> <span data-i18n="createCourse">Create Course</span>
                        </a>
                    </div>
                `;
            } else {
                container.innerHTML = courses.map(course => {
                    const courseAssignments = assignments.filter(a => a.courseId === course.id);
                    const courseResources = resources.filter(r => r.courseId === course.id);
                    const icon = subjectIcons[course.subject] || 'fa-book';
                    
                    return `
                        <div class="subject-card" style="cursor: pointer; transition: transform 0.3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                            <i class="fas ${icon}" style="font-size: 3rem; color: #6d28d9; margin-bottom: 15px;"></i>
                            <h3>${course.title}</h3>
                            <p style="color: #6b7280; margin: 10px 0;">
                                ${course.subject} • ${course.grade ? 'Grade ' + course.grade : 'All Grades'}
                            </p>
                            <p style="color: #6b7280; font-size: 14px;">
                                ${courseResources.length} <span data-i18n="resources">resources</span> • 
                                ${courseAssignments.length} <span data-i18n="assignments">assignments</span> • 
                                ${students.length} <span data-i18n="students">students</span>
                            </p>
                            <button class="btn btn-primary" style="margin-top: 15px; width: 100%;" onclick="manageCourse(${course.id})">
                                <i class="fas fa-cog"></i> <span data-i18n="manage">Manage</span>
                            </button>
                        </div>
                    `;
                }).join('');
            }
            
            translatePage();
        });
        
        function manageCourse(courseId) {
            const course = JSON.parse(localStorage.getItem('courses') || '[]').find(c => c.id === courseId);
            if (!course) return;
            
            alert(`Managing course: ${course.title}\n\nFeatures coming soon:\n- Edit course details\n- Add/remove lessons\n- Manage resources\n- View student progress`);
        }
    </script>
</body>
</html>
